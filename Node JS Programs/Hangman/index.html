<!DOCTYPE html>
<head>
    <title>----TEST ZONE!!!----</title>
</head>
<body>
    <style>
        *  {
            font-family: 'Courier New', monospace;
        }
    </style>
    <script>

        function myHangMan(lives) {
            let map = [
                ["* ", "* ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "# ", "# ", "# ", "# ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "# ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "* ", "* ", "* ", "* ", "* ", "* "],
                ["* ", "# ", "# ", "# ", "# ", "# ", "* ", "* "],
                ["* ", "* ", "* ", "* ", "* ", "* ", "* ", "* "],
            ];
            switch(lives){
                case 0:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    map[4][4] = "\\ ";
                    map[4][6] = "\/ ";
                    map[5][5] = "| ";
                    map[6][4] = "\/ ";
                    map[6][6] = "\\ ";
                    return map;
                    break;
                case 1:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    map[4][4] = "\\ ";
                    map[4][6] = "\/ ";
                    map[5][5] = "| ";
                    map[6][4] = "\/ ";
                    return map;
                    break;
                case 2:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    map[4][4] = "\\ ";
                    map[4][6] = "\/ ";
                    map[5][5] = "| ";
                    return map;
                    break;
                case 3:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    map[4][4] = "\\ ";
                    map[4][6] = "\/ ";
                    return map;
                    break;
                case 4:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    map[4][4] = "\\ ";
                    return map;
                    break;
                case 5:
                    map[3][5] = "0 ";
                    map[4][5] = "| ";
                    return map;
                    break;
                case 6:
                    map[3][5] = "0 ";
                    return map;
                    break;
                case 7:
                    return map;
                    break;
            }
        };
        
        let imageLines = [];

        function buildImage(){
            let imageBox = document.getElementById("imageBox");
            for (let i = 0; i < 10; i++){
                let p = document.createElement("p");
                imageLines.push(p);
                imageBox.appendChild(p);
                for (let j = 0; j < 8; j++){
                    let span = document.createElement("span");
                    p.appendChild(span);
                }
            }
        }

        function updateImage(lives){
            let map = myHangMan(lives);
            for(let i = 0; i < 10; i++){
                let p = imageLines[i];
                for(let j = 0; j < 8; j++){
                    let span = p.getElementsByTagName("span")[j];
                    if (map[i][j] != "* "){
                        span.style.fontWeight = 1000;
                        span.style.color = "blue";
                    } else {
                        span.style.fontWeight = "normal";
                        span.style.color = "black";
                    }
                    span.innerText = map[i][j];
                    
                }
                
            }
        };

        let lives = 7;

        let letters = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

        var words = ["cheese", "burger", "taco", "pizza", "steak", "chicken"];

        function randomWordGenerator(){
            randomNumber =  Math.floor(Math.random() * (words.length));
            wordInPlay = words[randomNumber];
            splitWord = wordInPlay.split("");
            return splitWord;
        };

        function buildReactiveWord(){
            emptyWord = randomWordGenerator();
            let reactiveElement = document.getElementById("reactiveWord");
            let reactiveWord = "";
            for (l = 0; l < emptyWord.length; l++){
                reactiveWord = reactiveWord.concat("_ ");
            }
            reactiveElement.innerHTML=reactiveWord;

        }

        function updateReactiveWord(location, guess){
            let reactiveElement = document.getElementById("reactiveWord");
            let pullWord = reactiveElement.innerHTML;
            let breakWord = pullWord.replaceAll(" ", "");
            breakWord = breakWord.split("");
                for(let j = 0; j < location.length; j++){
                    breakWord.splice(location[j], 1, guess);
                }
                for(let i = 0; i < breakWord.length; i++){
                    breakWord[i] = breakWord[i] + " ";
                }
            let fixWord = breakWord.join("");
            reactiveElement.innerHTML=fixWord;
            this.checkWord = breakWord;
            this.checkWord = this.checkWord.join("");
            this.checkWord = this.checkWord.replaceAll(" ", "");
            this.checkWord = this.checkWord.split("");
        };
        

        function getInputValue(){
            let input = document.getElementById("inputID").value;
            return input;
        };

        function validateInput(){
            for (h = 0; h < 26; h++){
                if (letters[h] === getInputValue()){
                    return true;
                    break;
                };
            };
            return false;
        };

        function afterInputGameplay(){
            if (this.gameEnded === true){
                refresh();
                return;
            }else{
                let guessVerification = validateInput();
                if (guessVerification === false){
                    let guess = getInputValue();
                    alert(guess + " is not a Valid Input, Please Try Again")
                } else if (guessVerification === true){
                    let guess = getInputValue();
                    if (splitWord.includes(guess)){
                        let location = [];
                        for(i = 0; i < splitWord.length; i++){
                            if (splitWord[i] == guess){
                                location.push(i);
                            }
                        }
                        updateReactiveWord(location, guess);
                        document.getElementById("inputID").value = "";
                        if (JSON.stringify(splitWord)==JSON.stringify(this.checkWord)){
                            win();
                        }
                    } else{
                        lives = lives -1;
                        alert(guess + " is incorrect! " + lives + " Lives Left!")
                        updateImage(lives);
                        updateWrongGuesses(guess);
                        if (lives === 0){
                            gameOver();
                        }
                        document.getElementById("inputID").value = "";
                    }
                };
            }
        };

        function buildWrongGuesses(){
            sinBin = [];
            let sinBox = document.getElementById("usedLettersBox");
            sinBox.innerHTML=sinBin;
        }

        function updateWrongGuesses(guess){
            sinBin.push(guess);
            for(let i = 0; i < letters.length; i++){
                if(guess === letters[i]){
                    letters.splice(i, 1);
                }
            }
            let sinBox = document.getElementById("usedLettersBox");
            sinBox.innerHTML=sinBin;
        }

        function gameOver(){
            this.gameEnded = true;
            alert("--GAME OVER-- You Lose!");
            alert("The word was " + splitWord.join(""));
        };

        function win(){
            this.gameEnded = true;
            alert("--YOU WIN--");
        };

        function refresh(){
            alert("The game has ended. Refresh to PLAY AGAIN...")

        };

        function beginRunTime(){
            buildImage();
            updateImage(lives);
            buildReactiveWord();
            buildWrongGuesses();
        };

        this.gameEnded = false;
        window.onload=beginRunTime;
    </script>
    <div id="imageBox"></div>
    <p id="reactiveWord"></p>
    <p>Wrong Guesses:</p>
    <p id="usedLettersBox"></p>
    <input type="text" placeholder="Enter Guess " id="inputID">
    <button id="button" type="button" onclick="afterInputGameplay();">Confirm</button>
</body>